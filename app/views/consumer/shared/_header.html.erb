<%# Consumer Shared Header - Stunning Redesign %>
<% active ||= 'dashboard' %>

<div class="relative z-20">
  <div class="backdrop-blur-xl bg-white/70 shadow-lg border-b border-white/20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-6">
          <%# Logo/Brand %>
          <div class="flex items-center space-x-3">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
              </svg>
            </div>
            <div>
              <h1 class="text-xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">
                API Portal
              </h1>
              <p class="text-xs text-gray-500">Developer Dashboard</p>
            </div>
          </div>

          <%# Environment & Tier Badges %>
          <div class="flex items-center space-x-2">
            <div class="px-3 py-1 rounded-full <%= Rails.env.production? ? 'bg-green-100 text-green-700 ring-2 ring-green-500/20' : 'bg-blue-100 ring-blue-500/20' %> text-xs font-semibold">
              <div class="flex items-center space-x-1">
                <div class="w-2 h-2 rounded-full <%= Rails.env.production? ? 'bg-green-500' : 'bg-blue-500' %> animate-pulse"></div>
                <span><%= Rails.env.production? ? 'Production' : 'Test' %></span>
              </div>
            </div>
            <div class="px-3 py-1 rounded-full bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 text-xs font-semibold ring-2 ring-purple-500/20">
              ‚ú® <%= current_user.tier.titleize %> Tier
            </div>
          </div>
        </div>

        <%# Navigation Tabs %>
        <div class="flex items-center space-x-6">
          <nav class="flex items-center space-x-1 bg-white/50 backdrop-blur-sm rounded-xl p-1 shadow-inner">
            <a href="<%= consumer_dashboard_path %>" class="px-4 py-2 rounded-lg <%= active == 'dashboard' ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-md' : 'text-gray-600 hover:text-gray-900 hover:bg-white/80' %> text-sm font-medium transition-all">
              Dashboard
            </a>
            <a href="<%= consumer_api_keys_path %>" class="px-4 py-2 rounded-lg <%= active == 'api_keys' ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-md' : 'text-gray-600 hover:text-gray-900 hover:bg-white/80' %> text-sm font-medium transition-all">
              API Keys
            </a>
            <a href="<%= consumer_usage_path %>" class="px-4 py-2 rounded-lg <%= active == 'usage' ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-md' : 'text-gray-600 hover:text-gray-900 hover:bg-white/80' %> text-sm font-medium transition-all">
              Usage
            </a>
            <a href="<%= consumer_errors_path %>" class="px-4 py-2 rounded-lg <%= active == 'errors' ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-md' : 'text-gray-600 hover:text-gray-900 hover:bg-white/80' %> text-sm font-medium transition-all">
              Errors
            </a>
          </nav>

          <%# User Menu %>
          <div class="relative">
            <button id="user-menu-button" class="flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 text-white font-bold shadow-lg ring-2 ring-white/50 hover:scale-110 transition-transform focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2">
              <%= current_user.email[0].upcase %>
            </button>

            <%# Dropdown menu - hidden by default %>
            <div id="user-menu-dropdown" class="absolute right-0 mt-2 w-52 origin-top-right rounded-2xl shadow-2xl bg-white/90 backdrop-blur-xl border border-white/20 opacity-0 invisible transition-all duration-200 transform scale-95 z-50">
              <div class="p-2">
                <div class="px-4 py-2 text-sm font-semibold text-gray-900">
                  <%= current_user.email %>
                </div>
                <a href="<%= consumer_settings_path %>" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 rounded-lg transition-colors">
                  ‚öôÔ∏è Settings
                </a>
                <a href="<%= logout_path %>" data-turbo-method="delete" class="flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                  üö™ Logout
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
